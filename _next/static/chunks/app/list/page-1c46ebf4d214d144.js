(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[631],{550:(e,r,a)=>{"use strict";a.d(r,{Lf:()=>x,ap:()=>b,fW:()=>f});var t=a(2078),s=a(9708),i=a(1328),l=a(9996),o=a(4663);let d={apiKey:"AIzaSyCo0OwR0-Hk6vLJ51BoYlKDLsFKjvLe-t8",authDomain:"mcbelist-51b64.firebaseapp.com",projectId:"mcbelist-51b64",storageBucket:"mcbelist-51b64.firebasestorage.app",messagingSenderId:"415710607201",appId:"1:415710607201:web:1e0f8b1e82fbea854c74f8",measurementId:"G-HKQQ73QGBG"},n=null,c=null,u=null,v=null,p=null;function m(){return n||(n=0===(0,t.Dk)().length?(0,t.Wp)(d):(0,t.Dk)()[0],c=(0,s.aU)(n),u=(0,i.xI)(n),v=(0,l.c7)(n),p=(0,o.P5)(n)),{app:n,db:c,auth:u,storage:v,analytics:p}}function x(){return c||m(),c}function b(){return u||m(),u}function f(){return v||m(),v}},2168:(e,r,a)=>{"use strict";a.d(r,{LD:()=>t,MV:()=>i,R6:()=>s});let t="KDwAH579lFVH69LoN0QnXIrPBXp2",s=["오픈채팅방","디스코드","기타"],i=["PvP","PvE","생존","크리에이티브","모드","애드온","서버","멀티플레이","싱글플레이","건축","레드스톤","마인크래프트 교육용","커맨드 블록","맵 제작","스킨","텍스처팩","리소스팩","행동팩","스카이블록","베드워즈","스카이워즈","미니게임","파크루","어드벤처","호러","탈출맵","퍼즐","롤플레이","RPG","경제","타운","서바이벌게임","헝거게임","팀전","PvE 협동","레이드","던전"]},4286:(e,r,a)=>{Promise.resolve().then(a.bind(a,6739))},6739:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>v});var t=a(5155),s=a(2115),i=a(9708),l=a(550),o=a(9497),d=a(2168),n=a(4486),c=a(1408);function u(){let{user:e}=(0,o.A)(),[r,a]=(0,s.useState)([]),[u,v]=(0,s.useState)(!0),[p,m]=(0,s.useState)(null),[x,b]=(0,s.useState)(""),[f,h]=(0,s.useState)("전체");(0,s.useEffect)(()=>{!async function(){try{let e=(0,l.Lf)(),r=(0,i.P)((0,i.rJ)(e,"communities"),(0,i._M)("status","==","approved"),(0,i.My)("order","desc"),(0,i.My)("createdAt","desc")),t=(await (0,i.GG)(r)).docs.map(e=>({id:e.id,...e.data()}));a(t)}catch(e){console.error("Error fetching communities:",e),m(e.message)}finally{v(!1)}}()},[]);let g=(0,s.useMemo)(()=>{let e=r;if("전체"!==f&&(e=e.filter(e=>e.category===f)),x.trim()){let r=x.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(r)||e.description.toLowerCase().includes(r)||e.tags&&e.tags.some(e=>e.toLowerCase().includes(r)))}return e},[r,f,x]),y=r=>{var a;return e&&(null==(a=r.likes)?void 0:a.includes(e.uid))},k=r=>{var a;return e&&(null==(a=r.dislikes)?void 0:a.includes(e.uid))};async function w(r){if(!e)return void alert("로그인이 필요합니다.");let t=(0,l.Lf)(),s=(0,i.H9)(t,"communities",r.id);try{y(r)?(await (0,i.mZ)(s,{likes:(0,i.C3)(e.uid)}),a(a=>a.map(a=>a.id===r.id?{...a,likes:a.likes.filter(r=>r!==e.uid)}:a))):(await (0,i.mZ)(s,{likes:(0,i.hq)(e.uid),dislikes:(0,i.C3)(e.uid)}),a(a=>a.map(a=>{var t;return a.id===r.id?{...a,likes:[...a.likes||[],e.uid],dislikes:(null==(t=a.dislikes)?void 0:t.filter(r=>r!==e.uid))||[]}:a})))}catch(e){console.error("Error toggling like:",e),alert("오류가 발생했습니다.")}}async function j(r){if(!e)return void alert("로그인이 필요합니다.");let t=(0,l.Lf)(),s=(0,i.H9)(t,"communities",r.id);try{k(r)?(await (0,i.mZ)(s,{dislikes:(0,i.C3)(e.uid)}),a(a=>a.map(a=>a.id===r.id?{...a,dislikes:a.dislikes.filter(r=>r!==e.uid)}:a))):(await (0,i.mZ)(s,{dislikes:(0,i.hq)(e.uid),likes:(0,i.C3)(e.uid)}),a(a=>a.map(a=>{var t;return a.id===r.id?{...a,dislikes:[...a.dislikes||[],e.uid],likes:(null==(t=a.likes)?void 0:t.filter(r=>r!==e.uid))||[]}:a})))}catch(e){console.error("Error toggling dislike:",e),alert("오류가 발생했습니다.")}}return u?(0,t.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center p-8 rounded-ui-lg border",style:{borderColor:"var(--ui-border)",background:"var(--ui-surface)",boxShadow:"var(--ui-shadow-sm)",color:"var(--vp-c-text-2)"},children:"로딩 중..."}):p?(0,t.jsxs)(n.P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center p-8 rounded-ui-lg border",style:{borderColor:"var(--ui-border)",background:"var(--ui-surface)",boxShadow:"var(--ui-shadow-sm)",color:"var(--vp-c-danger)"},children:["오류가 발생했습니다: ",p]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(n.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"p-5 rounded-ui-lg border space-y-4",style:{borderColor:"var(--ui-border)",background:"var(--ui-surface)",boxShadow:"var(--ui-shadow-sm)"},children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-end gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-[220px]",children:[(0,t.jsx)("label",{className:"block mb-2 text-xs font-bold uppercase tracking-wider",style:{color:"var(--vp-c-text-3)"},children:"검색"}),(0,t.jsx)("input",{type:"text",value:x,onChange:e=>b(e.target.value),placeholder:"커뮤니티 검색 (이름, 설명, 태그)",className:"w-full px-3.5 py-2.5 rounded-ui-md border transition-all focus:outline-none focus:ring-2",style:{borderColor:"var(--ui-border-strong)",background:"var(--vp-c-bg)",color:"var(--vp-c-text-1)"}})]}),(0,t.jsxs)("div",{className:"text-right text-sm",style:{color:"var(--vp-c-text-2)"},children:[(0,t.jsxs)("div",{className:"font-semibold",style:{color:"var(--vp-c-text-1)"},children:["총 ",g.length,"개"]}),(0,t.jsx)("div",{className:"text-xs",children:"승인된 커뮤니티만 표시됩니다"})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h("전체"),className:"px-3 py-1.5 rounded-ui-sm text-sm font-semibold border transition-all",style:{background:"전체"===f?"var(--vp-c-brand)":"var(--ui-surface-muted)",color:"전체"===f?"#fff":"var(--vp-c-text-2)",borderColor:"전체"===f?"transparent":"var(--ui-border)"},children:"전체"}),d.R6.map(e=>(0,t.jsx)(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(e),className:"px-3 py-1.5 rounded-ui-sm text-sm font-semibold border transition-all",style:{background:f===e?"var(--vp-c-brand)":"var(--ui-surface-muted)",color:f===e?"#fff":"var(--vp-c-text-2)",borderColor:f===e?"transparent":"var(--ui-border)"},children:e},e))]})]}),0===g.length?(0,t.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center p-12 rounded-ui-lg border-dashed border",style:{borderColor:"var(--ui-border)",color:"var(--vp-c-text-2)"},children:(0,t.jsx)("p",{children:x||"전체"!==f?"검색 결과가 없습니다.":"아직 승인된 커뮤니티가 없습니다."})}):(0,t.jsx)(n.P.div,{layout:!0,className:"grid gap-5 grid-cols-[repeat(auto-fit,minmax(260px,1fr))]",children:(0,t.jsx)(c.N,{mode:"popLayout",children:g.map((r,a)=>{var s,i;return(0,t.jsxs)(n.P.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},transition:{delay:.07*a,duration:.6,type:"spring",stiffness:100},whileHover:{y:-8,boxShadow:"var(--ui-shadow-md)",transition:{duration:.2}},className:"relative rounded-ui-lg border overflow-hidden",style:{borderColor:"var(--ui-border)",background:"var(--ui-surface)",boxShadow:"var(--ui-shadow-sm)"},children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1",style:{background:"linear-gradient(90deg, var(--ui-brand), var(--ui-accent))"}}),r.imageUrl&&(0,t.jsx)("div",{className:"w-full h-[170px] overflow-hidden",style:{background:"var(--ui-surface-muted)"},children:(0,t.jsx)("img",{src:r.imageUrl,alt:r.name,className:"w-full h-full object-cover"})}),(0,t.jsxs)("div",{className:"p-5 space-y-2.5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold truncate",style:{color:"var(--vp-c-text-1)"},children:r.name}),(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-ui-sm whitespace-nowrap",style:{background:"var(--vp-c-brand-soft)",color:"var(--vp-c-brand-dark)"},children:r.category})]}),(0,t.jsx)("p",{className:"text-sm line-clamp-2",style:{color:"var(--vp-c-text-2)",lineHeight:"1.6"},children:r.description}),r.tags&&r.tags.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1.5",children:r.tags.map(e=>(0,t.jsx)("span",{className:"px-2 py-1 text-xs rounded-ui-sm border",style:{background:"var(--ui-surface-muted)",borderColor:"var(--ui-border)",color:"var(--vp-c-text-2)"},children:e},e))}),void 0!==r.memberCount&&null!==r.memberCount&&(0,t.jsx)("div",{children:(0,t.jsxs)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-ui-sm",style:{background:"var(--ui-accent-soft)",color:"var(--ui-ink-soft)"},children:["현재 인원 ",r.memberCount,"명"]})}),(0,t.jsxs)("div",{className:"pt-3 border-t flex justify-between items-center gap-2 flex-wrap",style:{borderColor:"var(--ui-border)"},children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>w(r),title:e?"좋아요":"로그인이 필요합니다",className:"px-3 py-1.5 text-xs font-semibold rounded-ui-sm border transition-all",style:{background:y(r)?"var(--vp-c-brand-soft)":"var(--ui-surface-muted)",borderColor:y(r)?"var(--vp-c-brand)":"var(--ui-border)",color:y(r)?"var(--vp-c-brand-dark)":"var(--vp-c-text-2)"},children:["좋아요 ",(null==(s=r.likes)?void 0:s.length)||0]}),(0,t.jsxs)(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>j(r),title:e?"싫어요":"로그인이 필요합니다",className:"px-3 py-1.5 text-xs font-semibold rounded-ui-sm border transition-all",style:{background:k(r)?"var(--vp-c-brand-soft)":"var(--ui-surface-muted)",borderColor:k(r)?"var(--vp-c-brand)":"var(--ui-border)",color:k(r)?"var(--vp-c-brand-dark)":"var(--vp-c-text-2)"},children:["싫어요 ",(null==(i=r.dislikes)?void 0:i.length)||0]})]}),r.link&&(0,t.jsx)(n.P.a,{whileHover:{scale:1.05},whileTap:{scale:.95},href:r.link,target:"_blank",rel:"noopener noreferrer",className:"px-3.5 py-1.5 text-xs font-semibold rounded-ui-sm border transition-all",style:{borderColor:"var(--vp-c-text-1)",color:"var(--vp-c-text-1)"},children:"방문하기 →"})]})]})]},r.id)})})})]})}function v(){return(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6",style:{color:"var(--vp-c-text-1)"},children:"커뮤니티 목록"}),(0,t.jsx)(u,{})]})}},9497:(e,r,a)=>{"use strict";a.d(r,{A:()=>o});var t=a(2115),s=a(1328),i=a(550),l=a(2168);function o(){let[e,r]=(0,t.useState)(null),[a,o]=(0,t.useState)(!0),[d,n]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{let e=(0,i.ap)(),a=(0,s.hg)(e,e=>{r(e),n((null==e?void 0:e.uid)===l.LD),o(!1)});return()=>a()},[]),{user:e,loading:a,isAdmin:d,login:async(e,r)=>{let a=(0,i.ap)();return(0,s.x9)(a,e,r)},signup:async(e,r)=>{let a=(0,i.ap)();return(0,s.eJ)(a,e,r)},loginWithGoogle:async()=>{let e=(0,i.ap)(),r=new s.HF;return(0,s.df)(e,r)},logout:async()=>{let e=(0,i.ap)();return(0,s.CI)(e)}}}}},e=>{e.O(0,[135,497,852,441,255,358],()=>e(e.s=4286)),_N_E=e.O()}]);