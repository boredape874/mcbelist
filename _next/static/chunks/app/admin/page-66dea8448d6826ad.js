(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{550:(e,r,a)=>{"use strict";a.d(r,{Lf:()=>x,ap:()=>h,fW:()=>b});var t=a(2078),s=a(9708),o=a(1328),i=a(9996),l=a(4663);let n={apiKey:"AIzaSyDvtopV80qKWM-LamD4mQKFep3FR-NrPAM",authDomain:"mcbelist.firebaseapp.com",projectId:"mcbelist",storageBucket:"mcbelist.firebasestorage.app",messagingSenderId:"718617217848",appId:"1:718617217848:web:42485742e862f125078fcd",measurementId:"G-ELJG8BWGNL"},d=null,c=null,u=null,p=null,m=null;function v(){return d||(d=0===(0,t.Dk)().length?(0,t.Wp)(n):(0,t.Dk)()[0],c=(0,s.aU)(d),u=(0,o.xI)(d),p=(0,i.c7)(d),m=(0,l.P5)(d)),{app:d,db:c,auth:u,storage:p,analytics:m}}function x(){return c||v(),c}function h(){return u||v(),u}function b(){return p||v(),p}},2168:(e,r,a)=>{"use strict";a.d(r,{LD:()=>t,MV:()=>o,R6:()=>s});let t="KDwAH579lFVH69LoN0QnXIrPBXp2",s=["오픈채팅방","디스코드","기타"],o=["PvP","PvE","생존","크리에이티브","모드","애드온","서버","멀티플레이","싱글플레이","건축","레드스톤","마인크래프트 교육용","커맨드 블록","맵 제작","스킨","텍스처팩","리소스팩","행동팩","스카이블록","베드워즈","스카이워즈","미니게임","파크루","어드벤처","호러","탈출맵","퍼즐","롤플레이","RPG","경제","타운","서바이벌게임","헝거게임","팀전","PvE 협동","레이드","던전"]},7483:(e,r,a)=>{Promise.resolve().then(a.bind(a,7484))},7484:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>u});var t=a(5155),s=a(2115),o=a(9708),i=a(550),l=a(9497),n=a(4486),d=a(1408);function c(){let{user:e,loading:r,isAdmin:a}=(0,l.A)(),[c,u]=(0,s.useState)([]),[p,m]=(0,s.useState)([]),[v,x]=(0,s.useState)(!0),[h,b]=(0,s.useState)("pending");async function g(){x(!0);try{let e=(0,i.Lf)();try{let r=(0,o.P)((0,o.rJ)(e,"communities"),(0,o._M)("status","==","pending"),(0,o.My)("createdAt","desc")),a=await (0,o.GG)(r);u(a.docs.map(e=>({id:e.id,...e.data()})))}catch(t){console.error("Error loading pending communities:",t);let r=(0,o.P)((0,o.rJ)(e,"communities")),a=(await (0,o.GG)(r)).docs.map(e=>({id:e.id,...e.data()}));u(a.filter(e=>"pending"===e.status).sort((e,r)=>{var a,t,s,o;return((null==(t=r.createdAt)||null==(a=t.toMillis)?void 0:a.call(t))||0)-((null==(o=e.createdAt)||null==(s=o.toMillis)?void 0:s.call(o))||0)}))}try{let r=(0,o.P)((0,o.rJ)(e,"communities"),(0,o._M)("status","==","approved"),(0,o.My)("order","desc"),(0,o.My)("createdAt","desc")),a=await (0,o.GG)(r);m(a.docs.map(e=>({id:e.id,...e.data()})))}catch(t){console.error("Error loading approved communities:",t);let r=(0,o.P)((0,o.rJ)(e,"communities")),a=(await (0,o.GG)(r)).docs.map(e=>({id:e.id,...e.data()}));m(a.filter(e=>"approved"===e.status).sort((e,r)=>{var a,t,s,o;let i=(r.order||0)-(e.order||0);return 0!==i?i:((null==(t=r.createdAt)||null==(a=t.toMillis)?void 0:a.call(t))||0)-((null==(o=e.createdAt)||null==(s=o.toMillis)?void 0:s.call(o))||0)}))}}catch(e){console.error("Error loading communities:",e),alert("커뮤니티 목록을 불러오는데 실패했습니다: "+e.message)}finally{x(!1)}}async function f(e){if(confirm("이 커뮤니티를 승인하시겠습니까?"))try{let r=(0,i.Lf)();await (0,o.mZ)((0,o.H9)(r,"communities",e),{status:"approved"}),await g(),alert("승인되었습니다.")}catch(e){console.error("Error approving community:",e),alert("승인 처리에 실패했습니다.")}}async function y(e){if(confirm("이 커뮤니티를 거절하시겠습니까?"))try{let r=(0,i.Lf)();await (0,o.mZ)((0,o.H9)(r,"communities",e),{status:"rejected"}),await g(),alert("거절되었습니다.")}catch(e){console.error("Error rejecting community:",e),alert("거절 처리에 실패했습니다.")}}async function w(e){if(confirm("정말로 이 커뮤니티를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."))try{let r=(0,i.Lf)();await (0,o.kd)((0,o.H9)(r,"communities",e)),await g(),alert("삭제되었습니다.")}catch(e){console.error("Error deleting community:",e),alert("삭제에 실패했습니다.")}}async function j(e,r){try{let a=(0,i.Lf)();await (0,o.mZ)((0,o.H9)(a,"communities",e),{order:parseInt(r)}),await g()}catch(e){console.error("Error updating order:",e),alert("순위 변경에 실패했습니다.")}}if((0,s.useEffect)(()=>{if(!r){if(!e||!a)return void x(!1);g()}},[e,a,r]),!e)return(0,t.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center p-10 rounded-ui-lg border",style:{borderColor:"var(--ui-border)",background:"var(--ui-surface)",boxShadow:"var(--ui-shadow-sm)",color:"var(--vp-c-text-2)"},children:(0,t.jsx)("p",{children:"관리자 페이지는 로그인이 필요합니다."})});if(!a)return(0,t.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center p-10 rounded-ui-lg border",style:{borderColor:"var(--ui-border)",background:"var(--ui-surface)",boxShadow:"var(--ui-shadow-sm)",color:"var(--vp-c-text-2)"},children:(0,t.jsx)("p",{children:"관리자 권한이 없습니다."})});let N="pending"===h?c:p;return(0,t.jsxs)("div",{className:"max-w-6xl mx-auto space-y-7",children:[(0,t.jsxs)(n.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid gap-4 grid-cols-[repeat(auto-fit,minmax(180px,1fr))]",children:[(0,t.jsxs)("div",{className:"relative p-5 rounded-ui-lg border overflow-hidden",style:{borderColor:"var(--ui-border)",background:"var(--ui-surface)",boxShadow:"var(--ui-shadow-sm)"},children:[(0,t.jsx)("div",{className:"absolute inset-0 opacity-80 pointer-events-none",style:{background:"linear-gradient(120deg, rgba(27, 144, 127, 0.08), transparent 60%)"}}),(0,t.jsx)("p",{className:"m-0 uppercase tracking-widest text-[0.7rem] font-bold",style:{color:"var(--vp-c-text-3)"},children:"승인 대기"}),(0,t.jsx)("p",{className:"m-0 mt-1.5 text-2xl font-bold",style:{color:"var(--vp-c-text-1)"},children:c.length})]}),(0,t.jsxs)("div",{className:"relative p-5 rounded-ui-lg border overflow-hidden",style:{borderColor:"var(--ui-border)",background:"var(--ui-surface)",boxShadow:"var(--ui-shadow-sm)"},children:[(0,t.jsx)("div",{className:"absolute inset-0 opacity-80 pointer-events-none",style:{background:"linear-gradient(120deg, rgba(27, 144, 127, 0.08), transparent 60%)"}}),(0,t.jsx)("p",{className:"m-0 uppercase tracking-widest text-[0.7rem] font-bold",style:{color:"var(--vp-c-text-3)"},children:"승인 완료"}),(0,t.jsx)("p",{className:"m-0 mt-1.5 text-2xl font-bold",style:{color:"var(--vp-c-text-1)"},children:p.length})]})]}),(0,t.jsxs)(n.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1},className:"inline-flex gap-1.5 p-1.5 rounded-ui-sm border",style:{borderColor:"var(--ui-border)",background:"var(--ui-surface)",boxShadow:"var(--ui-shadow-sm)"},children:[(0,t.jsxs)(n.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>b("pending"),className:"px-4 py-2 text-sm font-semibold rounded-ui-sm transition-all whitespace-nowrap",style:{background:"pending"===h?"linear-gradient(120deg, var(--vp-c-brand), var(--ui-accent))":"transparent",color:"pending"===h?"#fff":"var(--vp-c-text-2)",boxShadow:"pending"===h?"var(--ui-shadow-sm)":"none"},children:["승인 대기 (",c.length,")"]}),(0,t.jsxs)(n.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>b("approved"),className:"px-4 py-2 text-sm font-semibold rounded-ui-sm transition-all whitespace-nowrap",style:{background:"approved"===h?"linear-gradient(120deg, var(--vp-c-brand), var(--ui-accent))":"transparent",color:"approved"===h?"#fff":"var(--vp-c-text-2)",boxShadow:"approved"===h?"var(--ui-shadow-sm)":"none"},children:["승인됨 (",p.length,")"]})]}),v?(0,t.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center p-8",style:{color:"var(--vp-c-text-2)"},children:"로딩 중..."}):0===N.length?(0,t.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center p-12 rounded-ui-lg border-dashed border",style:{borderColor:"var(--ui-border)",color:"var(--vp-c-text-2)"},children:"pending"===h?"승인 대기중인 커뮤니티가 없습니다.":"승인된 커뮤니티가 없습니다."}):(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsx)(d.N,{mode:"popLayout",children:N.map((e,r)=>{var a,s;return(0,t.jsxs)(n.P.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{delay:.07*r,duration:.6,type:"spring",stiffness:100},whileHover:{y:-4,boxShadow:"var(--ui-shadow-md)",transition:{duration:.2}},className:"relative rounded-ui-lg border overflow-hidden",style:{borderColor:"var(--ui-border)",background:"var(--ui-surface)",boxShadow:"var(--ui-shadow-sm)"},children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1",style:{background:"linear-gradient(90deg, var(--ui-brand), var(--ui-accent))"}}),e.imageUrl&&(0,t.jsx)("div",{className:"w-full h-[200px] overflow-hidden",style:{background:"var(--vp-c-bg)"},children:(0,t.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-full h-full object-cover"})}),(0,t.jsxs)("div",{className:"p-6 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3 min-w-0",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold truncate m-0",style:{color:"var(--vp-c-text-1)"},children:e.name}),(0,t.jsx)("span",{className:"px-2.5 py-1.5 text-xs font-semibold rounded-ui-sm whitespace-nowrap",style:{background:"var(--vp-c-brand-soft)",color:"var(--vp-c-brand-dark)"},children:e.category})]}),(0,t.jsx)("p",{className:"m-0 text-sm line-clamp-3",style:{color:"var(--vp-c-text-2)",lineHeight:"1.6"},children:e.description}),e.tags&&e.tags.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1.5",children:e.tags.map(e=>(0,t.jsx)("span",{className:"px-2.5 py-1 text-xs rounded-ui-sm border",style:{background:"var(--ui-surface-muted)",borderColor:"var(--ui-border)",color:"var(--vp-c-text-2)"},children:e},e))}),e.link&&(0,t.jsxs)("div",{className:"text-sm",style:{color:"var(--vp-c-text-2)"},children:["링크:"," ",(0,t.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"break-all",style:{color:"var(--vp-c-brand)"},children:e.link})]}),(0,t.jsxs)("div",{className:"text-sm",style:{color:"var(--vp-c-text-2)"},children:["현재 인원: ",e.memberCount||0,"명"]}),"pending"===h&&(0,t.jsxs)("div",{className:"text-sm",style:{color:"var(--vp-c-text-2)"},children:["등록자: ",e.createdByEmail||e.createdBy]}),"approved"===h&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"text-sm",style:{color:"var(--vp-c-text-2)"},children:["좋아요 ",(null==(a=e.likes)?void 0:a.length)||0," | 싫어요"," ",(null==(s=e.dislikes)?void 0:s.length)||0]}),(0,t.jsx)("div",{className:"p-3 rounded-ui-md border",style:{background:"var(--ui-surface-muted)",borderColor:"var(--ui-border)"},children:(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm flex-wrap",style:{color:"var(--vp-c-text-2)"},children:["순위 (높을수록 상위):",(0,t.jsx)("input",{type:"number",defaultValue:e.order||0,onChange:r=>j(e.id,r.target.value),className:"w-[90px] px-2 py-1.5 rounded-ui-sm border text-sm",style:{borderColor:"var(--ui-border-strong)",background:"var(--vp-c-bg)",color:"var(--vp-c-text-1)"}})]})})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 pt-3 mt-2 border-t-dashed border-t",style:{borderColor:"var(--ui-border)"},children:["pending"===h&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>f(e.id),className:"px-3.5 py-1.5 text-xs font-semibold rounded-ui-sm",style:{background:"#16a34a",color:"#fff",boxShadow:"var(--ui-shadow-sm)"},children:"승인"}),(0,t.jsx)(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>y(e.id),className:"px-3.5 py-1.5 text-xs font-semibold rounded-ui-sm",style:{background:"#f59e0b",color:"#fff",boxShadow:"var(--ui-shadow-sm)"},children:"거절"})]}),(0,t.jsx)(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>w(e.id),className:"px-3.5 py-1.5 text-xs font-semibold rounded-ui-sm",style:{background:"#ef4444",color:"#fff",boxShadow:"var(--ui-shadow-sm)"},children:"삭제"})]})]})]},e.id)})})})]})}function u(){return(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6",style:{color:"var(--vp-c-text-1)"},children:"관리자 패널"}),(0,t.jsx)(c,{})]})}},9497:(e,r,a)=>{"use strict";a.d(r,{A:()=>l});var t=a(2115),s=a(1328),o=a(550),i=a(2168);function l(){let[e,r]=(0,t.useState)(null),[a,l]=(0,t.useState)(!0),[n,d]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{let e=(0,o.ap)(),a=(0,s.hg)(e,e=>{r(e),d((null==e?void 0:e.uid)===i.LD),l(!1)});return()=>a()},[]),{user:e,loading:a,isAdmin:n,login:async(e,r)=>{let a=(0,o.ap)();return(0,s.x9)(a,e,r)},signup:async(e,r)=>{let a=(0,o.ap)();return(0,s.eJ)(a,e,r)},loginWithGoogle:async()=>{let e=(0,o.ap)(),r=new s.HF;return(0,s.df)(e,r)},logout:async()=>{let e=(0,o.ap)();return(0,s.CI)(e)}}}}},e=>{e.O(0,[135,497,852,441,255,358],()=>e(e.s=7483)),_N_E=e.O()}]);